<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.lnworks.aemdapi.mapper.member.LoginUser">

    <resultMap type="net.lnworks.aemdapi.util.DataListMap" id="DataMapVO" />

    <select id="getUserauthority" parameterType="net.lnworks.aemdapi.domain.LoginVO" resultMap="DataMapVO">
        <!-- 메인화면 진입 2번째 쿼리 -->
        <![CDATA[
        /* LoginUser.getUserauthority */
        SELECT A.ESNTL_ID USER_ID, A.AUTHOR_CODE AUTHORITY
        FROM SYSMEMBAUTHORINFO A
           , COMVNUSERMASTER B
        WHERE A.ESNTL_ID = B.ESNTL_ID
          AND B.ESNTL_ID = #{uniqId}
        ]]>
    </select>

    <select id="getLoginUser" parameterType="net.lnworks.aemdapi.domain.LoginVO" resultType="net.lnworks.aemdapi.domain.LoginVO">
        <![CDATA[
        /* LoginUser.getLoginUser */
        SELECT PTID AS ptId
            , PTNM AS ptNm
            , PTPWD AS ptPwd
        FROM AEAPIPARTNERINST
        WHERE 1=1
            AND PTID = #{ptId}
        ]]>
    </select>

    <select id="getUserRol" parameterType="net.lnworks.aemdapi.domain.LoginVO" resultType="net.lnworks.aemdapi.domain.LoginVO">
        <![CDATA[
        /* LoginUser.getUserRol */
        SELECT ROLENM AS roleNm
             , AUTHNM AS authNm
        FROM AEAPIPARTNERROLE
        WHERE 1=1
          AND PTID = #{ptId}
        ]]>
    </select>
</mapper>
